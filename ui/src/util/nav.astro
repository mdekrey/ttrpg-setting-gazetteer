---
import { getContentEntries } from '@/content/utils.astro';

export type NavEntryBase = {
	text: string;
};
export type PageNavEntry = NavEntryBase & {
	slug: string;
	header: false;
};
export type HeaderNavEntry = NavEntryBase & {
	slug: string;
	header: true;
};
export type NavEntry = PageNavEntry | HeaderNavEntry;

export async function getNavigation(): Promise<NavEntry[]> {
	const contentEntries = (await getContentEntries())
		.filter(article => !article.frontmatter.draft)
		.map((article): NavEntry => {
			return { text: article.frontmatter.title, slug: article.url, header: article.header };
		});

	return contentEntries;
}
---
